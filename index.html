<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>RampBlueprint ‚Äî DIY Skateboard Ramp Calculator</title>
  <meta name="description" content="Free DIY skateboard ramp blueprints with materials lists, cost estimates, and step-by-step build instructions. Mini ramps, quarter pipes, kickers, grind boxes, and rails.">
  <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üî®</text></svg>">
  <style>
    :root {
      --bg: #0a0a0a;
      --surface: #151515;
      --surface-2: #1e1e1e;
      --border: #2a2a2a;
      --text: #e8e8e8;
      --text-dim: #888;
      --accent: #f59e0b;
      --accent-dim: #b45309;
      --green: #22c55e;
      --blue: #3b82f6;
      --red: #ef4444;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; background: var(--bg); color: var(--text); line-height: 1.6; }
    
    header { text-align: center; padding: 3rem 1rem 2rem; border-bottom: 1px solid var(--border); }
    header h1 { font-size: 2.5rem; font-weight: 800; }
    header h1 span { color: var(--accent); }
    header p { color: var(--text-dim); margin-top: 0.5rem; font-size: 1.1rem; }

    .container { max-width: 1100px; margin: 0 auto; padding: 2rem 1rem; }

    /* Ramp type filters */
    .filters { display: flex; gap: 0.5rem; flex-wrap: wrap; margin-bottom: 2rem; justify-content: center; }
    .filter-btn { padding: 0.5rem 1rem; border: 1px solid var(--border); border-radius: 999px; background: var(--surface); color: var(--text-dim); cursor: pointer; font-size: 0.9rem; transition: all 0.2s; }
    .filter-btn:hover, .filter-btn.active { border-color: var(--accent); color: var(--accent); background: var(--surface-2); }

    /* Ramp grid */
    .ramp-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(320px, 1fr)); gap: 1.5rem; }
    .ramp-card { background: var(--surface); border: 1px solid var(--border); border-radius: 12px; overflow: hidden; cursor: pointer; transition: all 0.2s; }
    .ramp-card:hover { border-color: var(--accent); transform: translateY(-2px); }
    .ramp-card-header { padding: 1.5rem; }
    .ramp-card h2 { font-size: 1.3rem; margin-bottom: 0.25rem; }
    .ramp-card .type-badge { display: inline-block; padding: 0.15rem 0.6rem; border-radius: 999px; font-size: 0.75rem; font-weight: 600; text-transform: uppercase; }
    .type-badge.mini-ramp { background: #3b82f620; color: var(--blue); }
    .type-badge.quarter-pipe { background: #22c55e20; color: var(--green); }
    .type-badge.kicker { background: #f59e0b20; color: var(--accent); }
    .type-badge.box { background: #ef444420; color: var(--red); }
    .type-badge.rail { background: #a855f720; color: #a855f7; }
    .ramp-card .desc { color: var(--text-dim); font-size: 0.9rem; margin-top: 0.75rem; }
    .ramp-card .meta { display: flex; gap: 1rem; padding: 1rem 1.5rem; border-top: 1px solid var(--border); font-size: 0.85rem; color: var(--text-dim); }
    .ramp-card .meta span { display: flex; align-items: center; gap: 0.3rem; }

    /* Detail modal */
    .modal-overlay { display: none; position: fixed; inset: 0; background: rgba(0,0,0,0.85); z-index: 100; overflow-y: auto; padding: 2rem 1rem; }
    .modal-overlay.active { display: block; }
    .modal { max-width: 800px; margin: 0 auto; background: var(--surface); border: 1px solid var(--border); border-radius: 16px; overflow: hidden; }
    .modal-head { display: flex; justify-content: space-between; align-items: flex-start; padding: 2rem; border-bottom: 1px solid var(--border); }
    .modal-head h2 { font-size: 1.8rem; }
    .modal-close { background: none; border: none; color: var(--text-dim); font-size: 1.5rem; cursor: pointer; padding: 0.5rem; }
    .modal-close:hover { color: var(--text); }
    .print-btn { padding: 0.5rem 1rem; border: 1px solid var(--accent); border-radius: 8px; background: transparent; color: var(--accent); cursor: pointer; font-size: 0.85rem; font-weight: 600; transition: all 0.2s; }
    .print-btn:hover { background: var(--accent); color: var(--bg); }

    @media print {
      body * { visibility: hidden; }
      .modal, .modal * { visibility: visible; }
      .modal { position: absolute; left: 0; top: 0; width: 100%; border: none; background: #fff; color: #111; }
      .modal-overlay { display: block !important; position: absolute; background: #fff; overflow: visible; }
      .modal-head { border-bottom: 2px solid #333; }
      .modal-head h2 { color: #111; }
      .modal-body { color: #111; }
      .blueprint { background: #f5f5f5; border: 1px solid #ccc; }
      .blueprint svg text { fill: #111; }
      .blueprint svg line, .blueprint svg rect, .blueprint svg path { stroke: #333; }
      .dim-box { background: #f0f0f0; border: 1px solid #ccc; }
      .dim-box .val { color: #b45309; }
      .dim-box .label { color: #555; }
      .section-title { color: #111; border-bottom-color: #333; }
      th { color: #555; border-bottom-color: #333; }
      td { border-bottom-color: #ddd; color: #111; }
      td.qty { color: #b45309; }
      .modal-close, .print-btn, .no-print { display: none !important; }
      .type-badge { border: 1px solid currentColor; }
      a { color: #111; text-decoration: none; }
    }
    .modal-body { padding: 2rem; }

    /* Blueprint SVG */
    .blueprint { background: #0d1117; border: 1px solid var(--border); border-radius: 8px; padding: 1rem; margin-bottom: 2rem; text-align: center; }
    .blueprint svg { max-width: 100%; height: auto; }

    /* Dimensions */
    .dims { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 1rem; margin-bottom: 2rem; }
    .dim-box { text-align: center; padding: 1rem; background: var(--surface-2); border-radius: 8px; }
    .dim-box .val { font-size: 1.5rem; font-weight: 700; color: var(--accent); }
    .dim-box .label { font-size: 0.8rem; color: var(--text-dim); }

    /* Materials table */
    .section-title { font-size: 1.2rem; font-weight: 700; margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 1px solid var(--border); }
    table { width: 100%; border-collapse: collapse; margin-bottom: 2rem; }
    th { text-align: left; padding: 0.6rem; font-size: 0.8rem; text-transform: uppercase; color: var(--text-dim); border-bottom: 1px solid var(--border); }
    td { padding: 0.6rem; border-bottom: 1px solid var(--border); font-size: 0.9rem; }
    td.qty { font-weight: 700; color: var(--accent); text-align: center; }

    /* Cost & time */
    .cost-time { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 2rem; }
    .cost-time .box { padding: 1.25rem; background: var(--surface-2); border-radius: 8px; text-align: center; }
    .cost-time .box .val { font-size: 1.4rem; font-weight: 700; color: var(--green); }
    .cost-time .box .label { font-size: 0.8rem; color: var(--text-dim); }

    /* Steps */
    .steps { list-style: none; counter-reset: step; margin-bottom: 2rem; }
    .steps li { counter-increment: step; padding: 0.75rem 0 0.75rem 3rem; border-bottom: 1px solid var(--border); position: relative; }
    .steps li::before { content: counter(step); position: absolute; left: 0; top: 0.75rem; width: 2rem; height: 2rem; background: var(--accent-dim); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 0.8rem; font-weight: 700; }

    /* Tools */
    .tools-list { display: flex; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 2rem; }
    .tool-tag { padding: 0.3rem 0.8rem; background: var(--surface-2); border: 1px solid var(--border); border-radius: 999px; font-size: 0.85rem; }

    /* Calculator */
    .calculator { background: var(--surface); border: 1px solid var(--border); border-radius: 16px; padding: 2rem; margin-top: 2rem; }
    .calc-title { font-size: 1.5rem; margin-bottom: 0.5rem; }
    .calc-desc { color: var(--text-dim); margin-bottom: 1.5rem; font-size: 0.95rem; }
    .calc-form { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 1rem; align-items: end; }
    .calc-field label { display: block; font-size: 0.8rem; color: var(--text-dim); margin-bottom: 0.3rem; text-transform: uppercase; font-weight: 600; }
    .calc-field select, .calc-field input { width: 100%; padding: 0.7rem; background: var(--surface-2); border: 1px solid var(--border); border-radius: 8px; color: var(--text); font-size: 1rem; }
    .calc-field select:focus, .calc-field input:focus { outline: none; border-color: var(--accent); }
    .calc-btn { padding: 0.7rem 1.5rem; background: var(--accent); color: #000; border: none; border-radius: 8px; font-size: 1rem; font-weight: 700; cursor: pointer; transition: background 0.2s; }
    .calc-btn:hover { background: #fbbf24; }
    .calc-result { margin-top: 1.5rem; }
    .calc-result:empty { display: none; }
    .calc-result table { margin-bottom: 1rem; }
    .calc-summary { display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; margin-bottom: 1.5rem; }
    .calc-summary .box { padding: 1rem; background: var(--surface-2); border-radius: 8px; text-align: center; }
    .calc-summary .box .val { font-size: 1.3rem; font-weight: 700; color: var(--accent); }
    .calc-summary .box .label { font-size: 0.8rem; color: var(--text-dim); }
    .calc-cost { font-size: 1.1rem; font-weight: 600; color: var(--green); text-align: center; margin-top: 1rem; }

    footer { text-align: center; padding: 2rem; color: var(--text-dim); font-size: 0.85rem; border-top: 1px solid var(--border); }
    footer a { color: var(--accent); text-decoration: none; }

    @media (max-width: 600px) {
      header h1 { font-size: 1.8rem; }
      .ramp-grid { grid-template-columns: 1fr; }
      .dims { grid-template-columns: repeat(2, 1fr); }
      .cost-time { grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <header>
    <h1>üî® Ramp<span>Blueprint</span></h1>
    <p>Free DIY skateboard ramp plans ‚Äî blueprints, materials lists &amp; build guides</p>
  </header>

  <div class="container">
    <div class="filters" id="filters"></div>
    <div class="ramp-grid" id="rampGrid"></div>
  </div>

  <!-- Custom Dimension Calculator -->
  <div class="container" id="calculatorSection">
    <div class="calculator">
      <h2 class="calc-title">üìê Custom Dimension Calculator</h2>
      <p class="calc-desc">Enter your own dimensions and get an auto-generated materials list scaled to your build.</p>
      <div class="calc-form">
        <div class="calc-field">
          <label for="calcType">Ramp Type</label>
          <select id="calcType"></select>
        </div>
        <div class="calc-field">
          <label for="calcHeight">Height (inches)</label>
          <input type="number" id="calcHeight" min="6" max="144" placeholder="e.g. 36">
        </div>
        <div class="calc-field">
          <label for="calcWidth">Width (inches)</label>
          <input type="number" id="calcWidth" min="12" max="240" placeholder="e.g. 96">
        </div>
        <div class="calc-field">
          <label for="calcLength">Length (inches)</label>
          <input type="number" id="calcLength" min="12" max="360" placeholder="e.g. 192">
        </div>
        <button class="calc-btn" id="calcBtn">Generate Materials List</button>
      </div>
      <div id="calcResult" class="calc-result"></div>
    </div>
  </div>

  <div class="modal-overlay" id="modal">
    <div class="modal">
      <div class="modal-head">
        <div><h2 id="modalTitle"></h2><div id="modalBadge"></div></div>
        <div style="display:flex;gap:0.5rem;align-items:flex-start;">
          <button class="print-btn" onclick="window.print()">üñ®Ô∏è Print / PDF</button>
          <button class="modal-close" id="modalClose">&times;</button>
        </div>
      </div>
      <div class="modal-body" id="modalBody"></div>
    </div>
  </div>

  <footer>
    <p>Built by <a href="https://github.com/clawdiard">Clawdia</a> ¬∑ No database, no signup ‚Äî just blueprints üõπ</p>
  </footer>

  <script>
    let ramps = [];
    let activeFilter = 'all';

    async function init() {
      const res = await fetch('data/ramps.json');
      ramps = await res.json();
      renderFilters();
      renderGrid();
      initCalculator();
    }

    function renderFilters() {
      const types = ['all', ...new Set(ramps.map(r => r.type))];
      const labels = { 'all': 'All', 'mini-ramp': 'Mini Ramps', 'quarter-pipe': 'Quarter Pipes', 'kicker': 'Kickers', 'box': 'Boxes', 'rail': 'Rails' };
      document.getElementById('filters').innerHTML = types.map(t =>
        `<button class="filter-btn ${t === activeFilter ? 'active' : ''}" data-type="${t}">${labels[t] || t}</button>`
      ).join('');
      document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.addEventListener('click', () => { activeFilter = btn.dataset.type; renderFilters(); renderGrid(); });
      });
    }

    function renderGrid() {
      const filtered = activeFilter === 'all' ? ramps : ramps.filter(r => r.type === activeFilter);
      document.getElementById('rampGrid').innerHTML = filtered.map(r => `
        <div class="ramp-card" data-id="${r.id}">
          <div class="ramp-card-header">
            <span class="type-badge ${r.type}">${r.type.replace('-', ' ')}</span>
            <h2>${r.name}</h2>
            <p class="desc">${r.description}</p>
          </div>
          <div class="meta">
            <span>üí∞ $${r.estimatedCost.min}‚Äì$${r.estimatedCost.max}</span>
            <span>‚è± ${r.buildTime}</span>
            <span>üìè ${r.height}"h √ó ${r.width}"w</span>
          </div>
        </div>
      `).join('');
      document.querySelectorAll('.ramp-card').forEach(card => {
        card.addEventListener('click', () => openModal(card.dataset.id));
      });
    }

    function openModal(id) {
      const r = ramps.find(x => x.id === id);
      if (!r) return;
      document.getElementById('modalTitle').textContent = r.name;
      document.getElementById('modalBadge').innerHTML = `<span class="type-badge ${r.type}" style="margin-top:0.5rem;display:inline-block">${r.type.replace('-', ' ')}</span> <span style="color:var(--text-dim);font-size:0.9rem;margin-left:0.5rem">${r.difficulty}</span>`;

      const materialsRows = r.materials.filter(m => !m.optional).map(m =>
        `<tr><td>${m.item}</td><td class="qty">${m.qty}</td><td style="color:var(--text-dim)">${m.use}</td></tr>`
      ).join('');

      const optionalRows = r.materials.filter(m => m.optional).map(m =>
        `<tr style="opacity:0.6"><td>${m.item} ‚≠ê</td><td class="qty">‚Äì</td><td style="color:var(--text-dim)">${m.use}</td></tr>`
      ).join('');

      // Generate simple SVG blueprint
      const svg = generateBlueprint(r);

      document.getElementById('modalBody').innerHTML = `
        <p style="color:var(--text-dim);margin-bottom:1.5rem">${r.description}</p>
        
        <div class="blueprint">${svg}</div>

        <div class="dims">
          <div class="dim-box"><div class="val">${r.height}"</div><div class="label">Height</div></div>
          <div class="dim-box"><div class="val">${r.width}"</div><div class="label">Width</div></div>
          <div class="dim-box"><div class="val">${r.length}"</div><div class="label">Length</div></div>
          ${r.transitionRadius ? `<div class="dim-box"><div class="val">${r.transitionRadius}"</div><div class="label">Transition Radius</div></div>` : ''}
        </div>

        <div class="cost-time">
          <div class="box"><div class="val">$${r.estimatedCost.min} ‚Äì $${r.estimatedCost.max}</div><div class="label">Estimated Cost</div></div>
          <div class="box"><div class="val">${r.buildTime}</div><div class="label">Build Time</div></div>
        </div>

        <h3 class="section-title">üõ† Tools Needed</h3>
        <div class="tools-list">${r.tools.map(t => `<span class="tool-tag">${t}</span>`).join('')}</div>

        <h3 class="section-title">üì¶ Materials List</h3>
        <table><thead><tr><th>Material</th><th style="text-align:center">Qty</th><th>Use</th></tr></thead><tbody>${materialsRows}${optionalRows}</tbody></table>

        <h3 class="section-title">üìã Build Steps</h3>
        <ol class="steps">${r.steps.map(s => `<li>${s}</li>`).join('')}</ol>
      `;

      document.getElementById('modal').classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function generateBlueprint(r) {
      const W = 500, H = 250;
      const pad = 30;
      if (r.type === 'mini-ramp') {
        return `<svg viewBox="0 0 ${W} ${H}" xmlns="http://www.w3.org/2000/svg">
          <rect width="${W}" height="${H}" fill="#0d1117"/>
          <!-- Ground -->
          <line x1="${pad}" y1="${H-pad}" x2="${W-pad}" y2="${H-pad}" stroke="#334155" stroke-width="1" stroke-dasharray="4"/>
          <!-- Left transition -->
          <path d="M ${pad+20} ${H-pad} L ${pad+20} ${H-pad-80} Q ${pad+20} ${H-pad-140} ${pad+80} ${H-pad-140} L ${pad+140} ${H-pad-140}" fill="none" stroke="#f59e0b" stroke-width="2"/>
          <!-- Flat bottom -->
          <line x1="${pad+140}" y1="${H-pad-140}" x2="${W-pad-140}" y2="${H-pad-140}" stroke="#f59e0b" stroke-width="2"/>
          <!-- Right transition -->
          <path d="M ${W-pad-140} ${H-pad-140} L ${W-pad-80} ${H-pad-140} Q ${W-pad-20} ${H-pad-140} ${W-pad-20} ${H-pad-80} L ${W-pad-20} ${H-pad}" fill="none" stroke="#f59e0b" stroke-width="2"/>
          <!-- Platform left -->
          <line x1="${pad}" y1="${H-pad-80}" x2="${pad+20}" y2="${H-pad-80}" stroke="#f59e0b" stroke-width="2"/>
          <line x1="${pad}" y1="${H-pad-80}" x2="${pad}" y2="${H-pad}" stroke="#f59e0b" stroke-width="1.5"/>
          <!-- Platform right -->
          <line x1="${W-pad-20}" y1="${H-pad-80}" x2="${W-pad}" y2="${H-pad-80}" stroke="#f59e0b" stroke-width="2"/>
          <line x1="${W-pad}" y1="${H-pad-80}" x2="${W-pad}" y2="${H-pad}" stroke="#f59e0b" stroke-width="1.5"/>
          <!-- Coping dots -->
          <circle cx="${pad+20}" cy="${H-pad-80}" r="4" fill="#3b82f6"/>
          <circle cx="${W-pad-20}" cy="${H-pad-80}" r="4" fill="#3b82f6"/>
          <!-- Labels -->
          <text x="${W/2}" y="${H-pad-125}" text-anchor="middle" fill="#64748b" font-size="11">Flat Bottom</text>
          <text x="${pad+10}" y="${H-pad-85}" text-anchor="middle" fill="#3b82f6" font-size="9">Coping</text>
          <text x="${W/2}" y="${H-15}" text-anchor="middle" fill="#64748b" font-size="10">${r.height}"H √ó ${r.width}"W √ó ${r.length}"L</text>
        </svg>`;
      } else if (r.type === 'quarter-pipe') {
        return `<svg viewBox="0 0 ${W} ${H}" xmlns="http://www.w3.org/2000/svg">
          <rect width="${W}" height="${H}" fill="#0d1117"/>
          <line x1="${pad}" y1="${H-pad}" x2="${W-pad}" y2="${H-pad}" stroke="#334155" stroke-width="1" stroke-dasharray="4"/>
          <path d="M ${W/2-60} ${H-pad} L ${W/2-60} ${H-pad-120} Q ${W/2-60} ${H-pad-160} ${W/2+20} ${H-pad-160} L ${W/2+100} ${H-pad-160}" fill="none" stroke="#22c55e" stroke-width="2"/>
          <line x1="${W/2-100}" y1="${H-pad-120}" x2="${W/2-60}" y2="${H-pad-120}" stroke="#22c55e" stroke-width="2"/>
          <line x1="${W/2-100}" y1="${H-pad-120}" x2="${W/2-100}" y2="${H-pad}" stroke="#22c55e" stroke-width="1.5"/>
          <circle cx="${W/2-60}" cy="${H-pad-120}" r="4" fill="#3b82f6"/>
          <text x="${W/2-70}" y="${H-pad-125}" fill="#3b82f6" font-size="9">Coping</text>
          <text x="${W/2}" y="${H-15}" text-anchor="middle" fill="#64748b" font-size="10">${r.height}"H √ó ${r.width}"W √ó ${r.length}"L</text>
        </svg>`;
      } else if (r.type === 'kicker') {
        return `<svg viewBox="0 0 ${W} ${H}" xmlns="http://www.w3.org/2000/svg">
          <rect width="${W}" height="${H}" fill="#0d1117"/>
          <line x1="${pad}" y1="${H-pad}" x2="${W-pad}" y2="${H-pad}" stroke="#334155" stroke-width="1" stroke-dasharray="4"/>
          <path d="M ${W/2-80} ${H-pad} Q ${W/2-80} ${H-pad-80} ${W/2+20} ${H-pad-90}" fill="none" stroke="#f59e0b" stroke-width="2"/>
          <line x1="${W/2-80}" y1="${H-pad}" x2="${W/2+20}" y2="${H-pad}" stroke="#f59e0b" stroke-width="1"/>
          <text x="${W/2}" y="${H-15}" text-anchor="middle" fill="#64748b" font-size="10">${r.height}"H √ó ${r.width}"W √ó ${r.length}"L</text>
        </svg>`;
      } else if (r.type === 'box') {
        return `<svg viewBox="0 0 ${W} ${H}" xmlns="http://www.w3.org/2000/svg">
          <rect width="${W}" height="${H}" fill="#0d1117"/>
          <line x1="${pad}" y1="${H-pad}" x2="${W-pad}" y2="${H-pad}" stroke="#334155" stroke-width="1" stroke-dasharray="4"/>
          <rect x="${W/2-120}" y="${H-pad-60}" width="240" height="60" fill="none" stroke="#ef4444" stroke-width="2" rx="2"/>
          <line x1="${W/2-120}" y1="${H-pad-60}" x2="${W/2+120}" y2="${H-pad-60}" stroke="#3b82f6" stroke-width="3"/>
          <text x="${W/2}" y="${H-pad-65}" text-anchor="middle" fill="#3b82f6" font-size="9">Steel Edge (Coping)</text>
          <text x="${W/2}" y="${H-15}" text-anchor="middle" fill="#64748b" font-size="10">${r.height}"H √ó ${r.width}"W √ó ${r.length}"L</text>
        </svg>`;
      } else {
        return `<svg viewBox="0 0 ${W} ${H}" xmlns="http://www.w3.org/2000/svg">
          <rect width="${W}" height="${H}" fill="#0d1117"/>
          <line x1="${pad}" y1="${H-pad}" x2="${W-pad}" y2="${H-pad}" stroke="#334155" stroke-width="1" stroke-dasharray="4"/>
          <line x1="${W/2-100}" y1="${H-pad-50}" x2="${W/2+100}" y2="${H-pad-50}" stroke="#a855f7" stroke-width="4" stroke-linecap="round"/>
          <line x1="${W/2-80}" y1="${H-pad-50}" x2="${W/2-80}" y2="${H-pad}" stroke="#a855f7" stroke-width="2"/>
          <line x1="${W/2+80}" y1="${H-pad-50}" x2="${W/2+80}" y2="${H-pad}" stroke="#a855f7" stroke-width="2"/>
          <text x="${W/2}" y="${H-pad-55}" text-anchor="middle" fill="#a855f7" font-size="9">Rail</text>
          <text x="${W/2}" y="${H-15}" text-anchor="middle" fill="#64748b" font-size="10">${r.height}"H √ó ${r.width}"W √ó ${r.length}"L</text>
        </svg>`;
      }
    }

    document.getElementById('modalClose').addEventListener('click', () => {
      document.getElementById('modal').classList.remove('active');
      document.body.style.overflow = '';
    });
    document.getElementById('modal').addEventListener('click', e => {
      if (e.target === document.getElementById('modal')) {
        document.getElementById('modal').classList.remove('active');
        document.body.style.overflow = '';
      }
    });

    // Custom Dimension Calculator
    function initCalculator() {
      const sel = document.getElementById('calcType');
      const types = [...new Set(ramps.map(r => r.type))];
      const labels = { 'mini-ramp': 'Mini Ramp', 'quarter-pipe': 'Quarter Pipe', 'kicker': 'Kicker', 'box': 'Grind Box', 'rail': 'Rail' };
      sel.innerHTML = types.map(t => `<option value="${t}">${labels[t] || t}</option>`).join('');

      // Pre-fill with reference dims when type changes
      sel.addEventListener('change', prefillDims);
      prefillDims();

      document.getElementById('calcBtn').addEventListener('click', calculate);
    }

    function prefillDims() {
      const type = document.getElementById('calcType').value;
      const ref = ramps.find(r => r.type === type);
      if (ref) {
        document.getElementById('calcHeight').placeholder = `e.g. ${ref.height}`;
        document.getElementById('calcWidth').placeholder = `e.g. ${ref.width}`;
        document.getElementById('calcLength').placeholder = `e.g. ${ref.length}`;
      }
    }

    function calculate() {
      const type = document.getElementById('calcType').value;
      const h = parseFloat(document.getElementById('calcHeight').value);
      const w = parseFloat(document.getElementById('calcWidth').value);
      const l = parseFloat(document.getElementById('calcLength').value);

      if (!h || !w || !l || h <= 0 || w <= 0 || l <= 0) {
        document.getElementById('calcResult').innerHTML = '<p style="color:var(--red)">Please enter valid dimensions for all fields.</p>';
        return;
      }

      // Find the closest reference ramp of this type
      const refs = ramps.filter(r => r.type === type);
      if (!refs.length) return;

      // Pick the reference ramp closest in volume
      const customVol = h * w * l;
      let best = refs[0];
      let bestDiff = Math.abs((best.height * best.width * best.length) - customVol);
      for (const r of refs) {
        const d = Math.abs((r.height * r.width * r.length) - customVol);
        if (d < bestDiff) { best = r; bestDiff = d; }
      }

      const refVol = best.height * best.width * best.length;
      const scale = customVol / refVol;

      // Scale materials
      const scaled = best.materials.filter(m => !m.optional).map(m => {
        let qty = m.qty * scale;
        // Round up ‚Äî you can't buy half a sheet of plywood
        qty = Math.ceil(qty);
        if (qty < 1) qty = 1;
        return { item: m.item, qty, use: m.use };
      });

      // Optional materials
      const optional = best.materials.filter(m => m.optional);

      // Estimate cost by scaling
      const costScale = scale;
      const costMin = Math.round(best.estimatedCost.min * costScale);
      const costMax = Math.round(best.estimatedCost.max * costScale);

      // Render result
      const rows = scaled.map(m => `<tr><td>${m.item}</td><td class="qty">${m.qty}</td><td style="color:var(--text-dim)">${m.use}</td></tr>`).join('');
      const optRows = optional.map(m => `<tr style="opacity:0.6"><td>${m.item} ‚≠ê</td><td class="qty">‚Äì</td><td style="color:var(--text-dim)">${m.use}</td></tr>`).join('');

      document.getElementById('calcResult').innerHTML = `
        <div class="calc-summary">
          <div class="box"><div class="val">${h}"</div><div class="label">Height</div></div>
          <div class="box"><div class="val">${w}"</div><div class="label">Width</div></div>
          <div class="box"><div class="val">${l}"</div><div class="label">Length</div></div>
          <div class="box"><div class="val">${scale.toFixed(2)}√ó</div><div class="label">Scale Factor</div></div>
        </div>
        <h3 class="section-title">üì¶ Scaled Materials List</h3>
        <p style="color:var(--text-dim);font-size:0.85rem;margin-bottom:1rem">Based on <strong>${best.name}</strong> scaled ${scale < 1 ? 'down' : 'up'} by ${scale.toFixed(2)}√ó ‚Äî all quantities rounded up.</p>
        <table><thead><tr><th>Material</th><th style="text-align:center">Qty</th><th>Use</th></tr></thead><tbody>${rows}${optRows}</tbody></table>
        <div class="calc-cost">üí∞ Estimated Cost: $${costMin} ‚Äì $${costMax}</div>
      `;
    }

    init();
  </script>
</body>
</html>
